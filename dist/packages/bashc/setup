#!/usr/bin/env bash

set -euE

# Install

if [[ ! -d ~/.bashc ]]; then
  infn 'Symbolic link created: '
  ln --symbolic --verbose "${PKG_CONTENT}/.bashc" ~/.bashc
else
  inf "Directory: '$(realpath ~/.bashc)' already exists"
fi
# shellcheck disable=SC2088

if [[ ! -f ~/.bashrc ]] || ! grep --silent '~/.bashc/init' ~/.bashrc ; then

  cat <<EOF >> ~/.bashrc
# BASHC
. ~/.bashc/init && bashc::main
# :BASHC
EOF
  inf "Added: '~/.bashc/init' to '$(realpath ~/.bashrc)'"
else
  inf "'~/.bashc/init' Already added to '$(realpath ~/.bashrc)'"
fi
